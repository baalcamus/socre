<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.chinagpay.boss.dao.zboss.UserMapper" >
  <resultMap id="BaseResultMap" type="com.chinagpay.boss.model.User" >
       <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 12 17:35:46 CST 2015.
    -->
    <result column="ID" property="id"  />
    <result column="CREATE_TIME" property="createTime" jdbcType="VARCHAR" />
    <result column="UPDATE_TIME" property="updateTime" jdbcType="VARCHAR" />   
    <result column="LOGIN_NAME" property="loginName" jdbcType="VARCHAR" />
    <result column="REAL_NAME" property="realName" jdbcType="VARCHAR" />
    <result column="LOGIN_PWD" property="loginPwd" jdbcType="VARCHAR" />
    <result column="CONSOLE_DEP_ID" property="consoleDepId" jdbcType="VARCHAR" />
    <result column="CREATE_LOGIN_NAME" property="createLoginName" jdbcType="VARCHAR" />
    <result column="UPDATE_LOGIN_NAME" property="updateLoginName" jdbcType="VARCHAR" />
    <result column="STATUS" property="status" jdbcType="VARCHAR" />
    <result column="MER_ID" property="merId" jdbcType="VARCHAR" />
    <result column="TYPE" property="type" jdbcType="VARCHAR" />
  </resultMap>

<!-- 	<insert id="insertUser" parameterType="com.chinagpay.boss.model.User"> -->
<!-- 		insert into CONSOLE_USER(ID,LOGIN_NAME,LOGIN_PWD,REAL_NAME, -->
<!-- 		<if test=" consoleDepId !=null and  consoleDepId !=''"> -->
<!-- 			CONSOLE_DEP_ID, -->
<!-- 		</if> -->
<!-- 		<if test=" type !=null and  type !=''"> -->
<!-- 			TYPE, -->
<!-- 		</if> -->
<!-- 		<if test=" merId !=null and  merId !=''"> -->
<!-- 			MER_ID, -->
<!-- 		</if> -->
<!-- 		STATUS,CREATE_LOGIN_NAME,CREATE_TIME)  -->
<!-- 		values (ConsoleUser_seq.Nextval,#{loginName},#{loginPwd},#{realName}, -->
<!-- 		<if test=" consoleDepId !=null and  consoleDepId !=''"> -->
<!-- 			#{consoleDepId}, -->
<!-- 		</if> -->
<!-- 		<if test=" type !=null and  type !=''"> -->
<!-- 			#{type}, -->
<!-- 		</if> -->
<!-- 		<if test=" merId !=null and  merId !=''"> -->
<!-- 			#{merId}, -->
<!-- 		</if> -->
<!-- 		#{status},#{createLoginName},NOW()) -->
<!-- 	</insert> -->

	<insert id="insertUser" parameterType="com.chinagpay.boss.model.User">
		insert into CONSOLE_USER(ID,LOGIN_NAME,LOGIN_PWD,REAL_NAME,
		<if test=" consoleDepId !=null and  consoleDepId !=''">
			CONSOLE_DEP_ID,
		</if>
		<if test=" type !=null and  type !=''">
			TYPE,
		</if>
		<if test=" merId !=null and  merId !=''">
			MER_ID,
		</if>
		<if test=" payPwd !=null and  payPwd !=''">
			PAY_PWD,
		</if>
		<if test=" updateLoginName !=null and  updateLoginName !=''">
			UPDATE_LOGIN_NAME,
		</if>
		<if test=" updateTime !=null and  updateTime !=''">
			UPDATE_TIME,
		</if>
		<if test=" reservMsg !=null and  reservMsg !=''">
			RESERV_MSG,
		</if>
		<if test=" phone !=null and  phone !=''">
			PHONE,
		</if>
		<if test=" reservedEmail !=null and  reservedEmail !=''">
			RESERVED_EMAIL,
		</if>
		<if test=" reservedPhone !=null and  reservedPhone !=''">
			RESERVED_PHONE,
		</if>
		<if test=" area !=null and  area !=''">
			AREA,
		</if>
		STATUS,CREATE_LOGIN_NAME,CREATE_TIME) 
		values (#{id},#{loginName},#{loginPwd},#{realName},
		<if test=" consoleDepId !=null and  consoleDepId !=''">
			#{consoleDepId},
		</if>
		<if test=" type !=null and  type !=''">
			#{type},
		</if>
		<if test=" merId !=null and  merId !=''">
			#{merId},
		</if>
		<if test=" payPwd !=null and  payPwd !=''">
			#{payPwd},
		</if>
		<if test=" updateLoginName !=null and  updateLoginName !=''">
			#{updateLoginName},
		</if>
		<if test=" updateTime !=null and  updateTime !=''">
			#{updateTime},
		</if>
		<if test=" reservMsg !=null and  reservMsg !=''">
			#{reservMsg},
		</if>
		<if test=" phone !=null and  phone !=''">
			#{phone},
		</if>
		<if test=" reservedEmail !=null and  reservedEmail !=''">
			#{reservedEmail},
		</if>
		<if test=" reservedPhone !=null and  reservedPhone !=''">
			#{reservedPhone},
		</if>
		<if test=" area !=null and  area !=''">
			#{area},
		</if>
		#{status},#{createLoginName},NOW())

		<selectKey resultType="long" keyProperty="id">
			SELECT LAST_INSERT_ID() AS ID
		</selectKey>
	</insert>
  	
  	<select id="findUserList" parameterType="com.chinagpay.boss.model.User" resultMap="BaseResultMap">
		select * from CONSOLE_USER
		where 1=1
		<if test="type !=null and  type !=''">
			and type = #{type}
		</if>
	
		<if test="loginName!=null and loginName!=''">
			and LOGIN_NAME = #{loginName}
		</if>
		<if test="realName!=null and realName!=''">
			and REAL_NAME = #{realName}
		</if>
		<if test="consoleDepId!=null and consoleDepId!=''">
			and CONSOLE_DEP_ID = #{consoleDepId}
		</if>
		<if test="createLoginName!=null and createLoginName!=''">
			and CREATE_LOGIN_NAME = #{createLoginName}
		</if>
		order by create_time desc
	</select>
  
    <update id="updateStatus" parameterType="com.chinagpay.boss.model.User">
		update CONSOLE_USER set STATUS = #{status},UPDATE_LOGIN_NAME = #{updateLoginName},UPDATE_TIME = NOW() where LOGIN_NAME = #{loginName} and TYPE = #{type}
	</update>
	
	 <update id="updatePwd" parameterType="com.chinagpay.boss.model.User">
		update CONSOLE_USER set LOGIN_PWD = #{loginPwd},UPDATE_TIME = NOW() where LOGIN_NAME = #{loginName} and TYPE = #{type}
	</update>
	
	<select id="getUser" parameterType="com.chinagpay.boss.model.User" resultMap="BaseResultMap">
		select * from CONSOLE_USER where 1=1 
			<if test="loginName!=null and loginName!=''">
				and LOGIN_NAME = #{loginName}
			</if>
	    	<if test="realName!=null and realName!=''">
				and REAL_NAME = #{realName} 
			</if>
			<if test="loginPwd!=null and loginPwd!=''">
				and LOGIN_PWD = #{loginPwd} 
			</if>
			<if test="consoleDepId!=null and consoleDepId!=''">
				and CONSOLE_DEP_ID = #{consoleDepId} 
			</if>	
			<if test=" type !=null and  type !=''">
				and TYPE = #{type}
			</if>
			<if test=" merId !=null and  merId !=''">
				and mer_id = #{merId}
			</if>

	</select>
	
	
	
	<!-- ljs添加查询所有操作员 -->
	<select id="selectUsers" parameterType="com.chinagpay.boss.model.User" resultMap="BaseResultMap">
		select * from CONSOLE_USER where 1=1 
			<if test="loginName!=null and loginName!=''">
				and LOGIN_NAME = #{loginName}
			</if>
	    	<if test="realName!=null and realName!=''">
				and REAL_NAME = #{realName} 
			</if>
			<if test="loginPwd!=null and loginPwd!=''">
				and LOGIN_PWD = #{loginPwd} 
			</if>
			<if test="consoleDepId!=null and consoleDepId!=''">
				and CONSOLE_DEP_ID = #{consoleDepId} 
			</if>	
			<if test=" type !=null and  type !=''">
				and TYPE = #{type}
			</if>
			<if test=" merId !=null and  merId !=''">
				and mer_id = #{merId}
			</if>

	</select>
	
   	<select id="getUserCount" parameterType="com.chinagpay.boss.model.User" resultType="java.lang.Integer">
		select count(*) from CONSOLE_USER where 1=1
			<if test="loginName!=null and loginName!=''">
				and LOGIN_NAME = #{loginName}
			</if>
	    	<if test=" type !=null and  type !=''">
				and TYPE = #{type}
			</if>
			
	</select>

	<select id="selectUserByMerId" parameterType="com.chinagpay.boss.model.User" resultMap="BaseResultMap">
		select t1.* from CONSOLE_USER t1 where 1=1
		<if test="merId!=null and merId!=''">
			and t1.mer_id = #{merId}
		</if>
		<if test="type!=null and type!=''">
			and t1.type = #{type}
		</if>
	</select>

	<update id="updateUser" parameterType="com.chinagpay.boss.model.User">
		update CONSOLE_USER set LOGIN_NAME = #{loginName} 
		<if test=" realName!=null and  realName!=''">
			,REAL_NAME = #{realName} 	
		</if>
		<if test=" loginPwd!=null and  loginPwd!=''">
			, LOGIN_PWD = #{loginPwd}
		</if>
		<if test=" consoleDepId!=null and  consoleDepId!=''">
			, CONSOLE_DEP_ID = #{consoleDepId}
		</if>
		
		   where LOGIN_NAME = #{loginName} and TYPE = #{type}
	</update>
	
	<select id="selectByLoginName" parameterType="com.chinagpay.boss.model.User"
  	resultMap="BaseResultMap">
    select * from CONSOLE_USER
    where LOGIN_NAME = #{loginName}
    </select>
	
	<update id="updateUserById" parameterType="com.chinagpay.boss.model.User">
		update CONSOLE_USER set LOGIN_NAME = #{loginName} 
		<if test=" realName!=null and  realName!=''">
			,REAL_NAME = #{realName} 	
		</if>
		<if test=" loginPwd!=null and  loginPwd!=''">
			, LOGIN_PWD = #{loginPwd}
		</if>
		<if test=" consoleDepId!=null and  consoleDepId!=''">
			, CONSOLE_DEP_ID = #{consoleDepId}
		</if>
		<if test=" updateLoginName!=null and  updateLoginName!=''">
			, UPDATE_LOGIN_NAME = #{updateLoginName}
		</if>
		<if test=" updateTime!=null and  updateTime!=''">
			, UPDATE_TIME = #{updateTime}
		</if>
		<if test=" status !=null and  status !=''">
			, status = #{status}
		</if>
		<if test=" lockFlag !=null and  lockFlag !=''">
			, lock_flag = #{lockFlag}
		</if>
		<if test=" lockNum !=null and  lockNum !=''">
			, lock_flag = #{lockNum}
		</if>
		   where ID = #{id}
	</update>
	
</mapper>